!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("deltav")):"function"==typeof define&&define.amd?define(["deltav"],e):"object"==typeof exports?exports["axis-component"]=e(require("deltav")):t["axis-component"]=e(t.deltav)}(window,(function(t){return function(t){var e={};function i(a){if(e[a])return e[a].exports;var s=e[a]={i:a,l:!1,exports:{}};return t[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,a){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(a,s,function(e){return t[e]}.bind(null,s));return a},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(1))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(2),s=function(){function t(t){this.store=new a.AxisStore({padding:{left:t.padding.left,right:t.padding.right,top:t.padding.top,bottom:t.padding.bottom},providers:t.providers,width:window.innerWidth,height:window.innerHeight,lineWidth:t.lineWidth,tickWidth:t.tickWidth,tickLength:t.tickLength,labelSize:t.labelSize,labelColor:t.labelColor,labelPadding:t.labelPadding,type:t.type,labels:t.labels,startDate:t.startDate,endDate:t.endDate,numberRange:t.numberRange,numberGap:t.numberGap})}return t.prototype.shift=function(t){this.store.updateOffset(t)},t.prototype.zoom=function(t,e){this.store.updateScale(t,e)},t}();e.Axis=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(3))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(4),s=i(5),n=i(7),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(){function t(t){this.verticalLayout=!1,this.labelInstances=[],this.tickLineInstances=[],this.lineWidth=1,this.tickWidth=1,this.tickLength=10,this.labelSize=12,this.labelColor=[.8,.8,.8,1],this.labelPadding=10,this.maxLabelWidth=0,this.maxLabelHeight=0,this.maxLabelLengh=15,this.offset=0,this.scale=1,this.providers={ticks:new a.InstanceProvider,labels:new a.InstanceProvider},this.interval=1,this.width=t.width||100,this.height=t.height||100,this.padding=t.padding,this.lineWidth=t.lineWidth||this.lineWidth,this.tickWidth=t.tickWidth||this.tickWidth,this.tickLength=t.tickLength||this.tickLength,this.labelSize=t.labelSize||this.labelSize,this.labelColor=t.labelColor||this.labelColor,this.labelPadding=t.labelPadding||this.labelPadding,this.type=t.type,this.labels=this.generateLabelTexts(t),Object.assign(this.providers,t.providers),this.init()}return t.prototype.init=function(){var t=this;this.updateChartMetrics();var e=this.origin,i=this.axisWidth,s=this.axisHeight,n=this.tickLength,r=this.tickWidth,o=this.labelPadding,h=this.labels.length;if(0!=h)if(this.verticalLayout)for(var l=s/h,d=0;d<h;d++){var u=e[1]-(d+.5)*l*this.scale+this.offset,c=new a.EdgeInstance({start:[e[0],u],end:[e[0]-n,u],thickness:[r,r],startColor:[1,1,1,.5],endColor:[1,1,1,.5]});this.tickLineInstances.push(c);var p=new a.LabelInstance({anchor:{padding:o,type:a.AnchorType.MiddleRight},color:this.labelColor,fontSize:this.labelSize,origin:[e[0],u],text:this.labels[d],onReady:function(e){e.size[0]>t.maxLabelWidth&&(t.maxLabelWidth=e.size[0],t.updateChartMetrics(),t.layoutLabels()),e.size[1]>t.maxLabelHeight&&(t.maxLabelHeight=e.size[0],t.layoutLabels())}});this.labelInstances.push(p);var g=this.height-u;g>=this.viewRange[0]&&g<=this.viewRange[1]&&(this.providers.ticks.add(c),this.providers.labels.add(p))}else{var f=i/h;for(d=0;d<h;d++){var v=e[0]+(d+.5)*f*this.scale+this.offset;c=new a.EdgeInstance({start:[v,e[1]],end:[v,e[1]+n],thickness:[r,r],startColor:[1,1,1,.5],endColor:[1,1,1,.5]});this.tickLineInstances.push(c);var b=this.labels[d],y=b.length>this.maxLabelLengh?b.substr(0,this.maxLabelLengh):b;p=new a.LabelInstance({anchor:{padding:o,type:a.AnchorType.TopMiddle},color:[this.labelColor[0],this.labelColor[1],this.labelColor[2],0],fontSize:this.labelSize,origin:[v,e[1]+10],text:y,onReady:function(e){e.size[1]>t.maxLabelHeight&&(t.maxLabelHeight=e.size[1]),e.size[0]>t.maxLabelWidth&&(t.maxLabelWidth=e.size[0],t.layoutLabels())}});this.labelInstances.push(p),v>=this.viewRange[0]&&v<=this.viewRange[1]&&(this.providers.ticks.add(c),this.providers.labels.add(p))}}},t.prototype.generateLabelTexts=function(t){var e=t.type;return e===s.AxisDataType.LABEL?t.labels?t.labels:(console.error("With type LABEL, labels must be set."),null):e===s.AxisDataType.DATE?t.startDate&&t.endDate?this.generateDateLabels(t.startDate,t.endDate):(console.error("With type DATE, both startDate and endDate must be be set."),null):t.numberRange?this.generateNumberLabels(t.numberRange,t.numberGap):(console.error("With type NUMBER, both numberRange must be be set."),null)},t.prototype.generateDateLabels=function(t,e){var i="string"==typeof t?new Date(t):t,a="string"==typeof e?new Date(e):e;this.dateIntevalLengths=n.getIntervalLengths(i,a);var s=[];n.travelDates(i,a,s),this.dates=s;var o=[],h=[];s.forEach((function(t,e){0===e||e===s.length-1?o.push(t.year+" "+r[t.month]+" "+t.day):0===t.month&&1===t.day?(o.push(t.year+" "+r[t.month]),h.push(t)):1===t.day?o.push(r[t.month]+" "+t.day):o.push(""+t.day)}));for(var l=Math.floor(Math.log2(h.length)),d=this.dateIntevalLengths[this.dateIntevalLengths.length-1];l>0;){for(var u=Math.pow(2,l),c=0;c<h.length;c+=u)h[c].level++;d*=2,this.dateIntevalLengths.push(d),l--}return o},t.prototype.generateNumberLabels=function(t,e){for(var i=e||1,a=[],s=t[0];s<=t[1];s+=i)a.push(s.toString());return a},t.prototype.layoutLabels=function(){var t=this.labels.length,e=this.origin,i=this.tickLength;this.labelPadding;if(this.verticalLayout){var n=this.axisHeight/t,r=n*this.scale,o=0;if(this.type===s.AxisDataType.LABEL||this.type===s.AxisDataType.NUMBER)for(this.interval=1;r<=this.maxLabelHeight;)r*=2,this.interval*=2;else if(this.type===s.AxisDataType.DATE)for(this.interval=this.dateIntevalLengths[o];this.interval*r<=this.maxLabelHeight;)o++,this.interval=this.dateIntevalLengths[o];for(var h=0;h<t;h++){var l=e[1]-(h+.5)*n*this.scale-this.offset,d=this.labelInstances[h],u=this.height-d.origin[1],c=this.height-l,p=u>=this.viewRange[0]&&u<=this.viewRange[1],g=c>=this.viewRange[0]&&c<=this.viewRange[1];d.origin=[e[0],l],d.anchor={padding:this.labelPadding,type:a.AnchorType.MiddleRight},(b=this.tickLineInstances[h]).start=[e[0]-i,l],b.end=[e[0],l],this.type===s.AxisDataType.LABEL&&h%this.interval==0||this.type===s.AxisDataType.NUMBER&&h%this.interval==0||this.type===s.AxisDataType.DATE&&this.dates[h].level>=o?(d.color=[d.color[0],d.color[1],d.color[2],1],b.startColor=[b.startColor[0],b.startColor[1],b.startColor[2],1],b.endColor=[b.endColor[0],b.endColor[1],b.endColor[2],1]):(d.color=[d.color[0],d.color[1],d.color[2],0],b.startColor=[b.startColor[0],b.startColor[1],b.startColor[2],.5],b.endColor=[b.endColor[0],b.endColor[1],b.endColor[2],.5]),p&&!g?(this.providers.labels.remove(d),this.providers.ticks.remove(b)):!p&&g&&(this.providers.labels.add(d),this.providers.ticks.add(b))}}else{var f=this.axisWidth/t,v=f*this.scale;o=0;if(this.type===s.AxisDataType.LABEL||this.type===s.AxisDataType.NUMBER)for(this.interval=1;v<=this.maxLabelWidth;)v*=2,this.interval*=2;else if(this.type===s.AxisDataType.DATE)for(this.interval=this.dateIntevalLengths[o];this.interval*v<=this.maxLabelWidth;)o++,this.interval=this.dateIntevalLengths[o];for(h=0;h<t;h++){var b,y=e[0]+(h+.5)*f*this.scale+this.offset,x=(d=this.labelInstances[h]).origin[0];p=x>=this.viewRange[0]&&x<=this.viewRange[1],g=y>=this.viewRange[0]&&y<=this.viewRange[1];d.origin=[y,e[1]],d.anchor={padding:this.labelPadding,type:a.AnchorType.TopMiddle},(b=this.tickLineInstances[h]).start=[y,e[1]],b.end=[y,e[1]+i],this.type===s.AxisDataType.LABEL&&h%this.interval==0||this.type===s.AxisDataType.NUMBER&&h%this.interval==0||this.type===s.AxisDataType.DATE&&this.dates[h].level>=o?(d.color=[d.color[0],d.color[1],d.color[2],1],b.startColor=[b.startColor[0],b.startColor[1],b.startColor[2],1],b.endColor=[b.endColor[0],b.endColor[1],b.endColor[2],1]):(d.color=[d.color[0],d.color[1],d.color[2],0],b.startColor=[b.startColor[0],b.startColor[1],b.startColor[2],.5],b.endColor=[b.endColor[0],b.endColor[1],b.endColor[2],.5]),p&&!g?(this.providers.labels.remove(d),this.providers.ticks.remove(b)):!p&&g&&(this.providers.labels.add(d),this.providers.ticks.add(b))}}},t.prototype.updateChartMetrics=function(){var t=this.padding,e=this.width,i=this.height,a=t.left*e,s=t.right*e,n=t.top*i,r=t.bottom*i;this.axisHeight=i-n-r,this.verticalLayout?(this.axisWidth=e-a-s-this.maxLabelWidth,this.origin=[a+this.maxLabelWidth,i-r],this.viewRange=[r,r+this.axisHeight],this.maxRange=[r,r+this.axisHeight]):(this.axisWidth=e-a-s,this.origin=[a,i-r],this.viewRange=[a,a+this.axisWidth],this.maxRange=[a,a+this.axisWidth])},t.prototype.updateScale=function(t,e){var i=this.scale+(this.verticalLayout?e[1]:e[0]);if(this.scale=Math.max(i,1),this.verticalLayout){var a=this.maxRange[0],s=this.maxRange[1],n=this.viewRange[0],r=this.viewRange[1],o=Math.min(Math.max(n,this.height-t[1]),r),h=this.axisHeight*this.scale,l=o-(o-a)*h/(s-a),d=l+h;this.updateMaxRange(l,d,h)}else{var u=this.maxRange[0],c=this.maxRange[1],p=this.viewRange[0],g=this.viewRange[1],f=Math.min(Math.max(p,t[0]),g),v=this.axisWidth*this.scale,b=f-(f-u)*v/(c-u),y=b+v;this.updateMaxRange(b,y,v)}},t.prototype.updateOffset=function(t){if(this.verticalLayout){var e=this.maxRange[0]-t[1],i=this.maxRange[1]-t[1],a=this.maxRange[1]-this.maxRange[0];this.updateMaxRange(e,i,a)}else{var s=this.maxRange[0]+t[0],n=this.maxRange[1]+t[0],r=this.maxRange[1]-this.maxRange[0];this.updateMaxRange(s,n,r)}},t.prototype.updateMaxRange=function(t,e,i){t>=this.viewRange[0]&&e<=this.viewRange[1]?(t=this.viewRange[0],e=this.viewRange[1]):t>=this.viewRange[0]?e=(t=this.viewRange[0])+i:e<=this.viewRange[1]&&(t=(e=this.viewRange[1])-i),this.maxRange=[t,e],this.offset=this.maxRange[0]-this.viewRange[0],this.layoutLabels()},t}();e.AxisStore=o},function(e,i){e.exports=t},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(6))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.DATE=0]="DATE",t[t.NUMBER=1]="NUMBER",t[t.LABEL=2]="LABEL"}(e.AxisDataType||(e.AxisDataType={}))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=[31,28,31,30,31,30,31,31,30,31,30,31];function s(t){return!(t%100==0)&&t%4==0||t%400==0}function n(t){return 0===t?7:6===t?6:3===t||9===t?5:4}function r(t,e,i){return 1===e?s(t)?function(t){return 1===t?4:15===t?3:8===t||22===t?2:4===t||11===t||18===t||26===t?1:0}(i):function(t){return 1===t?4:15===t?3:8===t||22===t?2:4===t||11===t||18===t||25===t?1:0}(i):30===a[e]?function(t,e){return 1===e?n(t):16===e?3:8===e||23===e?2:4===e||12===e||19===e||27===e?1:0}(e,i):function(t,e){return 1===e?n(t):16===e?3:8===e||24===e?2:4===e||12===e||20===e||28===e?1:0}(e,i)}function o(t,e,i,a,s){for(var n=i;n<=a;n++){var o=r(t,e,n);s.push({year:t,month:e,day:n,level:o})}}function h(t,e,i){o(t,e,1,a[e],i)}function l(t,e){for(var i=0;i<12;i++)h(t,i,e)}function d(t,e,i,s,n,r){o(t,e,i,a[e],r);for(var l=e+1;l<s;l++)h(t,l,r);o(t,s,1,n,r)}function u(t,e){return 1===e?s(t)?29:28:a[e]}e.travelDates=function(t,e,i){var a=t.getFullYear(),s=e.getFullYear(),n=t.getMonth(),r=e.getMonth(),o=t.getDate(),h=e.getDate();if(a<s){d(a,n,o,11,31,i);for(var u=a;u<s;u++)l(u,i);d(s,0,1,r,h,i)}else a===s&&d(a,n,o,r,h,i)},e.getLength=function(t,e){var i=t.getFullYear(),a=e.getFullYear(),n=t.getMonth(),r=e.getMonth(),o=t.getDate(),h=e.getDate(),l=0;if(i<a){l+=u(i,n)-o+1;for(var d=n+1;d<12;d++)l+=u(i,d);for(var c=i+1;c<a;c++)l+=s(c)?366:365;for(d=0;d<r;d++)l+=u(a,d);l+=h}else if(i===a)if(n<r){l+=u(i,n)-o+1;for(d=n+1;d<r;d++)l+=u(i,d);l+=h}else n===r&&(l+=h-o+1);return l},e.getIntervalLengths=function(t,e){var i=t.getFullYear(),n=e.getFullYear(),r=t.getMonth(),o=e.getMonth(),h=!1,l=!1,d=!1,u=!1;if(i<n-1){for(var c=i;c<=n;c++)s(c)?l=!0:h=!0;d=!0,u=!0}else if(i<n){for(var p=r;p<12;p++){if(1===p)s(i)?l=!0:h=!0;else 30===(g=a[p])&&(d=!0),31===g&&(u=!0)}for(p=0;p<=o;p++){if(1===p)s(n)?l=!0:h=!0;else 30===(g=a[p])&&(d=!0),31===g&&(u=!0)}}else if(i==n){for(p=r;p<=o;p++){var g;if(1===p)s(i)&&(l=!0);else 30===(g=a[p])&&(d=!0),31===g&&(u=!0)}h=!l}var f=[1,3,7];return!h&&!l||d||u?f.push(15):f.push(14),h?f.push(28):l?f.push(29):d?f.push(30):f.push(31),l&&!h?(f.push(91),f.push(192),f.push(366)):(f.push(90),f.push(191),f.push(365)),f}}])}));
//# sourceMappingURL=index.js.map