!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("deltav")):"function"==typeof define&&define.amd?define(["deltav"],t):"object"==typeof exports?exports["axis-component"]=t(require("deltav")):e["axis-component"]=t(e.deltav)}(window,(function(e){return function(e){var t={};function i(a){if(t[a])return t[a].exports;var s=t[a]={i:a,l:!1,exports:{}};return e[a].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,a){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(i.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(a,s,function(t){return e[t]}.bind(null,s));return a},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.DATE=0]="DATE",e[e.NUMBER=1]="NUMBER",e[e.LABEL=2]="LABEL"}(t.AxisDataType||(t.AxisDataType={}))},function(e,t,i){"use strict";function a(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}Object.defineProperty(t,"__esModule",{value:!0}),a(i(2)),a(i(0))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(3),s=function(){function e(e){this.store=new a.AxisStore({view:e.view,providers:e.providers,tickWidth:e.tickWidth,tickLength:e.tickLength,labelSize:e.labelSize,labelColor:e.labelColor,labelPadding:e.labelPadding,type:e.type,labels:e.labels,startDate:e.startDate,endDate:e.endDate,numberRange:e.numberRange,numberGap:e.numberGap})}return e.prototype.shift=function(e){this.store.updateOffset(e)},e.prototype.zoom=function(e,t){this.store.updateScale(e,t)},e}();t.Axis=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(4))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i(5),s=i(6),n=i(7),r=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=function(){function e(e){this.verticalLayout=!0,this.axisChanged=!1,this.labelInstances=[],this.tickLineInstances=[],this.tickWidth=1,this.tickLength=10,this.labelSize=12,this.labelColor=[.8,.8,.8,1],this.labelPadding=10,this.maxLabelWidth=0,this.maxLabelHeight=0,this.maxLabelLengh=15,this.offset=0,this.scale=1,this.interval=1,this.providers={ticks:new a.InstanceProvider,labels:new a.InstanceProvider},this.view=e.view,this.tickWidth=e.tickWidth||this.tickWidth,this.tickLength=e.tickLength||this.tickLength,this.labelSize=e.labelSize||this.labelSize,this.labelColor=e.labelColor||this.labelColor,this.labelPadding=e.labelPadding||this.labelPadding,this.type=e.type,this.labels=this.generateLabelTexts(e),Object.assign(this.providers,e.providers),this.init()}return e.prototype.init=function(){var e=this;this.updateChartMetrics();var t=this.view.origin,i=this.view.size[0],s=this.view.size[1],n=this.tickLength,r=this.tickWidth,o=this.labelPadding,l=this.labels.length;if(0!=l)if(this.verticalLayout)for(var h=s/l,u=0;u<l;u++){var d=t[1]-(u+.5)*h*this.scale+this.offset,c=new a.EdgeInstance({start:[t[0],d],end:[t[0]-n,d],thickness:[r,r],startColor:[1,1,1,.5],endColor:[1,1,1,.5]});this.tickLineInstances.push(c);var v=new a.LabelInstance({anchor:{padding:o,type:a.AnchorType.MiddleRight},color:[this.labelColor[0],this.labelColor[1],this.labelColor[2],0],fontSize:this.labelSize,origin:[t[0],d],text:this.labels[u],onReady:function(t){t.size[0]>e.maxLabelWidth&&(e.maxLabelWidth=t.size[0],e.updateChartMetrics(),e.layoutLabels()),t.size[1]>e.maxLabelHeight&&(e.maxLabelHeight=t.size[1],e.layoutLabels())}});this.labelInstances.push(v);var p=window.innerHeight-d;p>=this.viewRange[0]&&p<=this.viewRange[1]&&(this.providers.ticks.add(c),this.providers.labels.add(v))}else{var g=i/l;for(u=0;u<l;u++){var f=t[0]+(u+.5)*g*this.scale+this.offset;c=new a.EdgeInstance({start:[f,t[1]],end:[f,t[1]+n],thickness:[r,r],startColor:[1,1,1,.5],endColor:[1,1,1,.5]});this.tickLineInstances.push(c);var b=this.labels[u],y=b.length>this.maxLabelLengh?b.substr(0,this.maxLabelLengh):b;v=new a.LabelInstance({anchor:{padding:o,type:a.AnchorType.TopMiddle},color:[this.labelColor[0],this.labelColor[1],this.labelColor[2],0],fontSize:this.labelSize,origin:[f,t[1]+10],text:y,onReady:function(t){t.size[1]>e.maxLabelHeight&&(e.maxLabelHeight=t.size[1]),t.size[0]>e.maxLabelWidth&&(e.maxLabelWidth=t.size[0],e.layoutLabels())}});this.labelInstances.push(v),f>=this.viewRange[0]&&f<=this.viewRange[1]&&(this.providers.ticks.add(c),this.providers.labels.add(v))}}},e.prototype.generateLabelTexts=function(e){var t=e.type;return t===s.AxisDataType.LABEL?e.labels?e.labels:(console.error("With type LABEL, labels must be set."),null):t===s.AxisDataType.DATE?e.startDate&&e.endDate?this.generateDateLabels(e.startDate,e.endDate):(console.error("With type DATE, both startDate and endDate must be be set."),null):e.numberRange?this.generateNumberLabels(e.numberRange,e.numberGap):(console.error("With type NUMBER, numberRange must be be set."),null)},e.prototype.generateDateLabels=function(e,t){var i="string"==typeof e?new Date(e):e,a="string"==typeof t?new Date(t):t;this.dateIntervalLengths=n.getIntervalLengths(i,a);var s=[];n.travelDates(i,a,s),this.dates=s;var o=[],l=[];s.forEach((function(e,t){0===t||t===s.length-1?o.push(e.year+" "+r[e.month]+" "+e.day):0===e.month&&1===e.day?(o.push(e.year+" "+r[e.month]),l.push(e)):1===e.day?o.push(r[e.month]+" "+e.day):o.push(""+e.day)}));for(var h=Math.floor(Math.log2(l.length)),u=this.dateIntervalLengths[this.dateIntervalLengths.length-1];h>0;){for(var d=Math.pow(2,h),c=0;c<l.length;c+=d)l[c].level++;u*=2,this.dateIntervalLengths.push(u),h--}return o},e.prototype.generateNumberLabels=function(e,t){for(var i=t||1,a=[],s=e[0];s<=e[1];s+=i)a.push(s.toString());return a},e.prototype.changeAxis=function(){this.verticalLayout=!this.verticalLayout,this.axisChanged=!0,this.updateChartMetrics(),this.layoutLabels(),this.axisChanged=!1},e.prototype.layoutLabels=function(){var e=this.labels.length,t=this.view.origin,i=this.tickLength,n=this.labelPadding;if(this.verticalLayout){var r=this.view.size[1]/e,o=r*this.scale,l=0;if(this.type===s.AxisDataType.LABEL||this.type===s.AxisDataType.NUMBER)for(this.interval=1;o<=this.maxLabelHeight;)o*=2,this.interval*=2;else if(this.type===s.AxisDataType.DATE)for(this.interval=this.dateIntervalLengths[l];this.interval*o<=this.maxLabelHeight;)l++,this.interval=this.dateIntervalLengths[l];for(var h=0;h<e;h++){var u=t[1]-(h+.5)*r*this.scale-this.offset,d=this.labelInstances[h],c=window.innerHeight-d.origin[1],v=window.innerHeight-u,p=c>=this.viewRange[0]&&c<=this.viewRange[1],g=v>=this.viewRange[0]&&v<=this.viewRange[1];d.origin=[t[0],u],d.anchor={padding:n,type:a.AnchorType.MiddleRight},(y=this.tickLineInstances[h]).start=[t[0]-i,u],y.end=[t[0],u],this.type===s.AxisDataType.LABEL&&h%this.interval==0||this.type===s.AxisDataType.NUMBER&&h%this.interval==0||this.type===s.AxisDataType.DATE&&this.dates[h].level>=l?(d.color=[d.color[0],d.color[1],d.color[2],1],y.startColor=[y.startColor[0],y.startColor[1],y.startColor[2],1],y.endColor=[y.endColor[0],y.endColor[1],y.endColor[2],1]):(d.color=[d.color[0],d.color[1],d.color[2],0],y.startColor=[y.startColor[0],y.startColor[1],y.startColor[2],.5],y.endColor=[y.endColor[0],y.endColor[1],y.endColor[2],.5]),!p&&!this.axisChanged||g?p&&!this.axisChanged||!g||(this.providers.labels.add(d),this.providers.ticks.add(y)):(this.providers.labels.remove(d),this.providers.ticks.remove(y))}}else{var f=this.view.size[0]/e,b=f*this.scale;l=0;if(this.type===s.AxisDataType.LABEL||this.type===s.AxisDataType.NUMBER)for(this.interval=1;b<=this.maxLabelWidth;)b*=2,this.interval*=2;else if(this.type===s.AxisDataType.DATE)for(this.interval=this.dateIntervalLengths[l];this.interval*b<=this.maxLabelWidth;)l++,this.interval=this.dateIntervalLengths[l];for(h=0;h<e;h++){var y,x=t[0]+(h+.5)*f*this.scale+this.offset,L=(d=this.labelInstances[h]).origin[0];p=L>=this.viewRange[0]&&L<=this.viewRange[1],g=x>=this.viewRange[0]&&x<=this.viewRange[1];d.origin=[x,t[1]],d.anchor={padding:n,type:a.AnchorType.TopMiddle},(y=this.tickLineInstances[h]).start=[x,t[1]],y.end=[x,t[1]+i],this.type===s.AxisDataType.LABEL&&h%this.interval==0||this.type===s.AxisDataType.NUMBER&&h%this.interval==0||this.type===s.AxisDataType.DATE&&this.dates[h].level>=l?(d.color=[d.color[0],d.color[1],d.color[2],1],y.startColor=[y.startColor[0],y.startColor[1],y.startColor[2],1],y.endColor=[y.endColor[0],y.endColor[1],y.endColor[2],1]):(d.color=[d.color[0],d.color[1],d.color[2],0],y.startColor=[y.startColor[0],y.startColor[1],y.startColor[2],.5],y.endColor=[y.endColor[0],y.endColor[1],y.endColor[2],.5]),!p&&!this.axisChanged||g?p&&!this.axisChanged||!g||(this.providers.labels.add(d),this.providers.ticks.add(y)):(this.providers.labels.remove(d),this.providers.ticks.remove(y))}}},e.prototype.updateChartMetrics=function(){var e=this.view.origin,t=this.view.size[0],i=this.view.size[1];this.verticalLayout?(this.viewRange=[window.innerHeight-e[1],window.innerHeight-e[1]+i],this.maxRange=[window.innerHeight-e[1],window.innerHeight-e[1]+i]):(this.viewRange=[e[0],e[0]+t],this.maxRange=[e[0],e[0]+t]),this.scale=1,this.offset=this.maxRange[0]-this.viewRange[0]},e.prototype.updateScale=function(e,t){var i=this.scale+(this.verticalLayout?t[1]:t[0]);this.scale=Math.max(i,1);var a=this.view.size[0],s=this.view.size[1];if(this.verticalLayout){var n=this.maxRange[0],r=this.maxRange[1],o=this.viewRange[0],l=this.viewRange[1],h=Math.min(Math.max(o,window.innerHeight-e[1]),l),u=s*this.scale,d=h-(h-n)*u/(r-n),c=d+u;this.updateMaxRange(d,c,u)}else{var v=this.maxRange[0],p=this.maxRange[1],g=this.viewRange[0],f=this.viewRange[1],b=Math.min(Math.max(g,e[0]),f),y=a*this.scale,x=b-(b-v)*y/(p-v),L=x+y;this.updateMaxRange(x,L,y)}},e.prototype.updateOffset=function(e){if(this.verticalLayout){var t=this.maxRange[0]-e[1],i=this.maxRange[1]-e[1],a=this.maxRange[1]-this.maxRange[0];this.updateMaxRange(t,i,a)}else{var s=this.maxRange[0]+e[0],n=this.maxRange[1]+e[0],r=this.maxRange[1]-this.maxRange[0];this.updateMaxRange(s,n,r)}},e.prototype.updateMaxRange=function(e,t,i){e>=this.viewRange[0]&&t<=this.viewRange[1]?(e=this.viewRange[0],t=this.viewRange[1]):e>=this.viewRange[0]?t=(e=this.viewRange[0])+i:t<=this.viewRange[1]&&(e=(t=this.viewRange[1])-i),this.maxRange=[e,t],this.offset=this.maxRange[0]-this.viewRange[0],this.layoutLabels()},e}();t.AxisStore=o},function(t,i){t.exports=e},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i])}(i(0))},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=[31,28,31,30,31,30,31,31,30,31,30,31];function s(e){return!(e%100==0)&&e%4==0||e%400==0}function n(e){return 0===e?7:6===e?6:3===e||9===e?5:4}function r(e,t,i){return 1===t?s(e)?function(e){return 1===e?4:15===e?3:8===e||22===e?2:4===e||11===e||18===e||26===e?1:0}(i):function(e){return 1===e?4:15===e?3:8===e||22===e?2:4===e||11===e||18===e||25===e?1:0}(i):30===a[t]?function(e,t){return 1===t?n(e):16===t?3:8===t||23===t?2:4===t||12===t||19===t||27===t?1:0}(t,i):function(e,t){return 1===t?n(e):16===t?3:8===t||24===t?2:4===t||12===t||20===t||28===t?1:0}(t,i)}function o(e,t,i,a,s){for(var n=i;n<=a;n++){var o=r(e,t,n);s.push({year:e,month:t,day:n,level:o})}}function l(e,t,i){o(e,t,1,a[t],i)}function h(e,t){for(var i=0;i<12;i++)l(e,i,t)}function u(e,t,i,s,n,r){o(e,t,i,a[t],r);for(var h=t+1;h<s;h++)l(e,h,r);o(e,s,1,n,r)}function d(e,t){return 1===t?s(e)?29:28:a[t]}t.travelDates=function(e,t,i){var a=e.getFullYear(),s=t.getFullYear(),n=e.getMonth(),r=t.getMonth(),o=e.getDate(),l=t.getDate();if(a<s){u(a,n,o,11,31,i);for(var d=a;d<s;d++)h(d,i);u(s,0,1,r,l,i)}else a===s&&u(a,n,o,r,l,i)},t.getLength=function(e,t){var i=e.getFullYear(),a=t.getFullYear(),n=e.getMonth(),r=t.getMonth(),o=e.getDate(),l=t.getDate(),h=0;if(i<a){h+=d(i,n)-o+1;for(var u=n+1;u<12;u++)h+=d(i,u);for(var c=i+1;c<a;c++)h+=s(c)?366:365;for(u=0;u<r;u++)h+=d(a,u);h+=l}else if(i===a)if(n<r){h+=d(i,n)-o+1;for(u=n+1;u<r;u++)h+=d(i,u);h+=l}else n===r&&(h+=l-o+1);return h},t.getIntervalLengths=function(e,t){var i=e.getFullYear(),n=t.getFullYear(),r=e.getMonth(),o=t.getMonth(),l=!1,h=!1,u=!1,d=!1;if(i<n-1){for(var c=i;c<=n;c++)s(c)?h=!0:l=!0;u=!0,d=!0}else if(i<n){for(var v=r;v<12;v++){if(1===v)s(i)?h=!0:l=!0;else 30===(p=a[v])&&(u=!0),31===p&&(d=!0)}for(v=0;v<=o;v++){if(1===v)s(n)?h=!0:l=!0;else 30===(p=a[v])&&(u=!0),31===p&&(d=!0)}}else if(i==n){for(v=r;v<=o;v++){var p;if(1===v)s(i)&&(h=!0);else 30===(p=a[v])&&(u=!0),31===p&&(d=!0)}l=!h}var g=[1,3,7];return!l&&!h||u||d?g.push(15):g.push(14),l?g.push(28):h?g.push(29):u?g.push(30):g.push(31),h&&!l?(g.push(91),g.push(192),g.push(366)):(g.push(90),g.push(191),g.push(365)),g}}])}));
//# sourceMappingURL=index.js.map